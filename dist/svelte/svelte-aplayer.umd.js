!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Aplayer=e()}(this,(function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function l(){return Object.create(null)}function a(t){t.forEach(n)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function i(t,e,n){t.$$.on_destroy.push(o(e,n))}function c(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function u(t,e,n=e){return t.set(n),e}function h(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function y(){return m("")}function w(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t){return Array.from(t.childNodes)}function E(t,e,n,l){for(let a=0;a<t.length;a+=1){const l=t[a];if(l.nodeName===e){let e=0;const s=[];for(;e<l.attributes.length;){const t=l.attributes[e++];n[t.name]||s.push(t.name)}for(let t=0;t<s.length;t++)l.removeAttribute(s[t]);return t.splice(a,1)[0]}}return l?v(e):f(e)}function b(t,e){for(let n=0;n<t.length;n+=1){const l=t[n];if(3===l.nodeType)return l.data=""+e,t.splice(n,1)[0]}return m(e)}function k(t){return b(t," ")}function M(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function j(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function T(t,e,n){t.classList[n?"add":"remove"](e)}class _{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=f(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)d(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(p)}}let I;function D(t){I=t}function A(){if(!I)throw new Error("Function called outside component initialization");return I}function S(){const t=A();return(e,n)=>{const l=t.$$.callbacks[e];if(l){const a=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);l.slice().forEach((e=>{e.call(t,a)}))}}}const z=[],q=[],L=[],B=[],N=Promise.resolve();let P=!1;function V(t){L.push(t)}let C=!1;const O=new Set;function H(){if(!C){C=!0;do{for(let t=0;t<z.length;t+=1){const e=z[t];D(e),R(e.$$)}for(D(null),z.length=0;q.length;)q.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];O.has(e)||(O.add(e),e())}L.length=0}while(z.length);for(;B.length;)B.pop()();P=!1,C=!1,O.clear()}}function R(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(V)}}const U=new Set;function Y(t,e){t&&t.i&&(U.delete(t),t.i(e))}function X(t,e){t.d(1),e.delete(t.key)}function W(t,e){-1===t.$$.dirty[0]&&(z.push(t),P||(P=!0,N.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(e,r,o,i,c,u,h=[-1]){const d=I;D(e);const f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:l(),dirty:h,skip_bound:!1};let v=!1;if(f.ctx=o?o(e,r.props||{},((t,n,...l)=>{const a=l.length?l[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=a)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](a),v&&W(e,t)),n})):[],f.update(),v=!0,a(f.before_update),f.fragment=!!i&&i(f.ctx),r.target){if(r.hydrate){const t=x(r.target);f.fragment&&f.fragment.l(t),t.forEach(p)}else f.fragment&&f.fragment.c();r.intro&&Y(e.$$.fragment),function(t,e,l,r){const{fragment:o,on_mount:i,on_destroy:c,after_update:u}=t.$$;o&&o.m(e,l),r||V((()=>{const e=i.map(n).filter(s);c?c.push(...e):a(e),t.$$.on_mount=[]})),u.forEach(V)}(e,r.target,r.anchor,r.customElement),H()}D(d)}const J=[];function G(e,n=t){let l;const a=[];function s(t){if(r(e,t)&&(e=t,l)){const t=!J.length;for(let n=0;n<a.length;n+=1){const t=a[n];t[1](),J.push(t,e)}if(t){for(let t=0;t<J.length;t+=2)J[t][0](J[t+1]);J.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,o=t){const i=[r,o];return a.push(i),1===a.length&&(l=n(s)||t),r(e),()=>{const t=a.indexOf(i);-1!==t&&a.splice(t,1),0===a.length&&(l(),l=null)}}}}function K(e,n,l){const r=!Array.isArray(e),i=r?[e]:e,c=n.length<2;return{subscribe:G(l,(e=>{let l=!1;const u=[];let h=0,d=t;const p=()=>{if(h)return;d();const l=n(r?u[0]:u,e);c?e(l):d=s(l)?l:t},f=i.map(((t,e)=>o(t,(t=>{u[e]=t,h&=~(1<<e),l&&p()}),(()=>{h|=1<<e}))));return l=!0,p(),function(){a(f),d()}})).subscribe}}const Q=t=>{const e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),l=Math.floor(t-3600*e-60*n);return(e>0?[e,n,l]:[n,l]).map((t=>t<10?"0"+t:""+t)).join(":")},Z=/mobile/i.test(window.navigator.userAgent);function tt(t){if(t){const e=(t=t.replace(/([^\]^\n])\[/g,((t,e)=>e+"\n["))).split("\n");let n=[];const l=e.length;for(let t=0;t<l;t++){const l=e[t].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),a=e[t].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(l){const t=l.length;for(let e=0;e<t;e++){const t=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(l[e]),s=60*t[1]+parseInt(t[2])+(t[4]?parseInt(t[4])/(2===(t[4]+"").length?100:1e3):0);n.push([s,a])}}}return n=n.filter((t=>t[1])),n.sort(((t,e)=>t[0]-e[0])),n}return[]}console.log("\n %c Svelte APlayer v0.1.0 %c http://svelte-aplayer.js.org \n\n","color: #fff; background: #ff3e00; padding:5px 0;","background: #fadfa3; padding:5px 0;");const et=[];function nt(t,e,n){const l=t.slice();return l[74]=e[n],l[76]=n,l}function lt(t,e,n){const l=t.slice();return l[77]=e[n],l[79]=n,l}function at(t){let e,n,l;return{c(){e=f("div"),n=v("svg"),l=v("path"),this.h()},l(t){e=E(t,"DIV",{class:!0});var a=x(e);n=E(a,"svg",{xmlns:!0,version:!0,viewBox:!0,class:!0},1);var s=x(n);l=E(s,"path",{d:!0,class:!0},1),x(l).forEach(p),s.forEach(p),a.forEach(p),this.h()},h(){$(l,"d","M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"),$(l,"class","svelte-1a7j4k"),$(n,"xmlns","http://www.w3.org/2000/svg"),$(n,"version","1.1"),$(n,"viewBox","0 0 16 31"),$(n,"class","svelte-1a7j4k"),$(e,"class","aplayer-button aplayer-play svelte-1a7j4k")},m(t,a){d(t,e,a),h(e,n),h(n,l)},d(t){t&&p(e)}}}function st(t){let e,n,l;return{c(){e=f("div"),n=v("svg"),l=v("path"),this.h()},l(t){e=E(t,"DIV",{class:!0});var a=x(e);n=E(a,"svg",{xmlns:!0,version:!0,viewBox:!0,class:!0},1);var s=x(n);l=E(s,"path",{d:!0,class:!0},1),x(l).forEach(p),s.forEach(p),a.forEach(p),this.h()},h(){$(l,"d","M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"),$(l,"class","svelte-1a7j4k"),$(n,"xmlns","http://www.w3.org/2000/svg"),$(n,"version","1.1"),$(n,"viewBox","0 0 17 32"),$(n,"class","svelte-1a7j4k"),$(e,"class","aplayer-button aplayer-pause svelte-1a7j4k")},m(t,a){d(t,e,a),h(e,n),h(n,l)},d(t){t&&p(e)}}}function rt(t){let e,n,l=[],a=new Map,s=t[6];const r=t=>t[77][0];for(let o=0;o<s.length;o+=1){let e=lt(t,s,o),n=r(e);a.set(n,l[o]=ot(n,e))}return{c(){e=f("div"),n=f("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=E(t,"DIV",{class:!0});var a=x(e);n=E(a,"DIV",{class:!0,style:!0});var s=x(n);for(let e=0;e<l.length;e+=1)l[e].l(s);s.forEach(p),a.forEach(p),this.h()},h(){$(n,"class","aplayer-lrc-contents svelte-1a7j4k"),j(n,"transform","translateY(calc("+Math.max(t[7],0)+" * -1 * calc(var(--base-font-size) + 4px)))"),$(e,"class","aplayer-lrc svelte-1a7j4k")},m(t,a){d(t,e,a),h(e,n);for(let e=0;e<l.length;e+=1)l[e].m(n,null)},p(t,e){192&e[0]&&(s=t[6],l=function(t,e,n,l,a,s,r,o,i,c,u,h){let d=t.length,p=s.length,f=d;const v={};for(;f--;)v[t[f].key]=f;const m=[],g=new Map,y=new Map;for(f=p;f--;){const t=h(a,s,f),o=n(t);let i=r.get(o);i?l&&i.p(t,e):(i=c(o,t),i.c()),g.set(o,m[f]=i),o in v&&y.set(o,Math.abs(f-v[o]))}const w=new Set,$=new Set;function x(t){Y(t,1),t.m(o,u),r.set(t.key,t),u=t.first,p--}for(;d&&p;){const e=m[p-1],n=t[d-1],l=e.key,a=n.key;e===n?(u=e.first,d--,p--):g.has(a)?!r.has(l)||w.has(l)?x(e):$.has(a)?d--:y.get(l)>y.get(a)?($.add(l),x(e)):(w.add(a),d--):(i(n,r),d--)}for(;d--;){const e=t[d];g.has(e.key)||i(e,r)}for(;p;)x(m[p-1]);return m}(l,e,r,1,t,s,a,n,X,ot,null,lt)),128&e[0]&&j(n,"transform","translateY(calc("+Math.max(t[7],0)+" * -1 * calc(var(--base-font-size) + 4px)))")},d(t){t&&p(e);for(let e=0;e<l.length;e+=1)l[e].d()}}}function ot(t,e){let n,l,a,s=e[77][1]+"";return{key:t,first:null,c(){n=f("p"),l=m(s),a=g(),this.h()},l(t){n=E(t,"P",{class:!0});var e=x(n);l=b(e,s),a=k(e),e.forEach(p),this.h()},h(){$(n,"class","svelte-1a7j4k"),T(n,"aplayer-lrc-current",e[79]===e[7]),this.first=n},m(t,e){d(t,n,e),h(n,l),h(n,a)},p(t,a){e=t,64&a[0]&&s!==(s=e[77][1]+"")&&M(l,s),192&a[0]&&T(n,"aplayer-lrc-current",e[79]===e[7])},d(t){t&&p(n)}}}function it(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new _(l)},m(t,e){n.m('<svg\n                  xmlns="http://www.w3.org/2000/svg"\n                  version="1.1"\n                  viewBox="0 0 28 32"\n                  ><path\n                    d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"\n                  /></svg\n        >',t,e),d(t,l,e)},p:t,d(t){t&&p(l),t&&n.d()}}}function ct(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new _(l)},m(t,e){n.m('<svg\n                  xmlns="http://www.w3.org/2000/svg"\n                  version="1.1"\n                  viewBox="0 0 28 32"\n                  ><path\n                    d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"\n                  /></svg\n                >',t,e),d(t,l,e)},p:t,d(t){t&&p(l),t&&n.d()}}}function ut(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new _(l)},m(t,e){n.m('<svg\n                xmlns="http://www.w3.org/2000/svg"\n                version="1.1"\n                viewBox="0 0 32 32"\n                ><path\n                  d="M0.622 18.334h19.54v7.55l11.052-9.412-11.052-9.413v7.549h-19.54v3.725z"\n                /></svg\n              >',t,e),d(t,l,e)},p:t,d(t){t&&p(l),t&&n.d()}}}function ht(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new _(l)},m(t,e){n.m('<svg\n                xmlns="http://www.w3.org/2000/svg"\n                version="1.1"\n                viewBox="0 0 32 32"\n                ><path\n                  d="M22.667 4l7 6-7 6 7 6-7 6v-4h-3.653l-3.76-3.76 2.827-2.827 2.587 2.587h2v-8h-2l-12 12h-6v-4h4.347l12-12h3.653v-4zM2.667 8h6l3.76 3.76-2.827 2.827-2.587-2.587h-4.347v-4z"\n                /></svg\n              >',t,e),d(t,l,e)},p:t,d(t){t&&p(l),t&&n.d()}}}function dt(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new _(l)},m(t,e){n.m(' <svg\n                xmlns="http://www.w3.org/2000/svg"\n                version="1.1"\n                viewBox="0 0 29 32"\n                ><path\n                  d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333z"\n                /></svg\n              >',t,e),d(t,l,e)},p:t,d(t){t&&p(l),t&&n.d()}}}function pt(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new _(l)},m(t,e){n.m('<svg\n                xmlns="http://www.w3.org/2000/svg"\n                version="1.1"\n                viewBox="0 0 33 32"\n                ><path\n                  d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333zM17.333 20v-8h-1.333l-2.667 1.333v1.333h2v5.333h2z"\n                /></svg\n              >',t,e),d(t,l,e)},p:t,d(t){t&&p(l),t&&n.d()}}}function ft(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new _(l)},m(t,e){n.m('<svg\n                xmlns="http://www.w3.org/2000/svg"\n                version="1.1"\n                viewBox="0 0 29 32"\n                ><path\n                  d="M2.667 7.027l1.707-1.693 22.293 22.293-1.693 1.707-4-4h-11.64v4l-5.333-5.333 5.333-5.333v4h8.973l-8.973-8.973v0.973h-2.667v-3.64l-4-4zM22.667 17.333h2.667v5.573l-2.667-2.667v-2.907zM22.667 6.667v-4l5.333 5.333-5.333 5.333v-4h-10.907l-2.667-2.667h13.573z"\n                /></svg\n              >',t,e),d(t,l,e)},p:t,d(t){t&&p(l),t&&n.d()}}}function vt(e){let n,l,a,s,r;return{c(){n=f("button"),l=v("svg"),a=v("path"),this.h()},l(t){n=E(t,"BUTTON",{type:!0,class:!0});var e=x(n);l=E(e,"svg",{xmlns:!0,version:!0,viewBox:!0,class:!0},1);var s=x(l);a=E(s,"path",{d:!0,class:!0},1),x(a).forEach(p),s.forEach(p),e.forEach(p),this.h()},h(){$(a,"d","M20.8 14.4q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2zM1.6 11.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2zM20.8 20.8q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2z"),$(a,"class","svelte-1a7j4k"),$(l,"xmlns","http://www.w3.org/2000/svg"),$(l,"version","1.1"),$(l,"viewBox","0 0 22 32"),$(l,"class","svelte-1a7j4k"),$(n,"type","button"),$(n,"class","aplayer-icon aplayer-icon-menu svelte-1a7j4k")},m(t,o){d(t,n,o),h(n,l),h(l,a),s||(r=w(n,"click",e[60]),s=!0)},p:t,d(t){t&&p(n),s=!1,r()}}}function mt(t){let e;return{c(){e=f("span"),this.h()},l(t){e=E(t,"SPAN",{class:!0}),x(e).forEach(p),this.h()},h(){$(e,"class","aplayer-list-cur svelte-1a7j4k")},m(t,n){d(t,e,n)},d(t){t&&p(e)}}}function gt(t){let e,n,l,a,s,r,o,i,c,u,v,y,j,T=t[76]+1+"",_=t[74].name+"",I=t[74].artist+"",D=t[76]===t[18].playingIndex&&mt();function A(){return t[61](t[76])}return{c(){e=f("li"),D&&D.c(),n=g(),l=f("span"),a=m(T),s=g(),r=f("span"),o=m(_),i=g(),c=f("span"),u=m(I),v=g(),this.h()},l(t){e=E(t,"LI",{class:!0});var h=x(e);D&&D.l(h),n=k(h),l=E(h,"SPAN",{class:!0});var d=x(l);a=b(d,T),d.forEach(p),s=k(h),r=E(h,"SPAN",{class:!0});var f=x(r);o=b(f,_),f.forEach(p),i=k(h),c=E(h,"SPAN",{class:!0});var m=x(c);u=b(m,I),m.forEach(p),v=k(h),h.forEach(p),this.h()},h(){$(l,"class","aplayer-list-index svelte-1a7j4k"),$(r,"class","aplayer-list-title"),$(c,"class","aplayer-list-artist svelte-1a7j4k"),$(e,"class","svelte-1a7j4k")},m(t,p){d(t,e,p),D&&D.m(e,null),h(e,n),h(e,l),h(l,a),h(e,s),h(e,r),h(r,o),h(e,i),h(e,c),h(c,u),h(e,v),y||(j=w(e,"click",A),y=!0)},p(l,a){(t=l)[76]===t[18].playingIndex?D||(D=mt(),D.c(),D.m(e,n)):D&&(D.d(1),D=null),16&a[0]&&_!==(_=t[74].name+"")&&M(o,_),16&a[0]&&I!==(I=t[74].artist+"")&&M(u,I)},d(t){t&&p(e),D&&D.d(),y=!1,j()}}}function yt(e){let n,l,r,o,i,c,u,v,y,_,I,D,A,S,z,q,L,B,N,P,V,C,O,H,R,U,Y,X,W,F,J,G,K,Q,tt,et,lt,ot,mt,yt,wt,$t,xt,Et,bt,kt,Mt,jt,Tt=e[5].name+"",_t=e[5].artist+"",It=e[20].ptime+"",Dt=e[20].duration+"";function At(t,e){return t[1].paused?at:st}let St=At(e),zt=St(e),qt=e[5].lrc&&rt(e);function Lt(t,e){return t[22].muted||t[1].muted?ct:it}let Bt=Lt(e),Nt=Bt(e);function Pt(t,e){return"random"===t[17].order?ht:ut}let Vt=Pt(e),Ct=Vt(e);function Ot(t,e){return"none"===t[17].loop?ft:"one"===t[17].loop?pt:"all"===t[17].loop?dt:void 0}let Ht=Ot(e),Rt=Ht&&Ht(e),Ut=e[4].length>1&&vt(e),Yt=e[4],Xt=[];for(let t=0;t<Yt.length;t+=1)Xt[t]=gt(nt(e,Yt,t));return{c(){n=f("div"),l=f("div"),r=f("div"),zt.c(),o=g(),i=f("div"),c=f("div"),u=f("span"),v=m(Tt),y=g(),_=f("span"),I=m(_t),D=g(),qt&&qt.c(),A=g(),S=f("div"),z=f("div"),q=f("div"),L=f("div"),B=g(),N=f("div"),P=f("div"),V=f("span"),C=g(),O=f("div"),H=f("span"),R=f("span"),U=m(It),Y=m(" /\n            "),X=f("span"),W=m(Dt),F=g(),J=f("span"),G=g(),K=f("div"),Q=f("button"),Nt.c(),tt=g(),et=f("div"),lt=f("div"),ot=f("div"),mt=g(),yt=f("button"),Ct.c(),wt=g(),$t=f("button"),Rt&&Rt.c(),xt=g(),Ut&&Ut.c(),Et=g(),bt=f("div"),kt=f("ol");for(let t=0;t<Xt.length;t+=1)Xt[t].c();this.h()},l(t){n=E(t,"DIV",{class:!0});var e=x(n);l=E(e,"DIV",{class:!0});var a=x(l);r=E(a,"DIV",{class:!0,style:!0});var s=x(r);zt.l(s),s.forEach(p),o=k(a),i=E(a,"DIV",{class:!0});var h=x(i);c=E(h,"DIV",{class:!0});var d=x(c);u=E(d,"SPAN",{class:!0});var f=x(u);v=b(f,Tt),f.forEach(p),y=k(d),_=E(d,"SPAN",{class:!0});var m=x(_);I=b(m,_t),m.forEach(p),d.forEach(p),D=k(h),qt&&qt.l(h),A=k(h),S=E(h,"DIV",{class:!0});var g=x(S);z=E(g,"DIV",{class:!0});var w=x(z);q=E(w,"DIV",{class:!0});var $=x(q);L=E($,"DIV",{class:!0,style:!0}),x(L).forEach(p),B=k($),N=E($,"DIV",{class:!0,style:!0});var M=x(N);P=E(M,"DIV",{class:!0});var j=x(P);V=E(j,"SPAN",{class:!0,style:!0}),x(V).forEach(p),j.forEach(p),M.forEach(p),$.forEach(p),w.forEach(p),C=k(g),O=E(g,"DIV",{class:!0});var T=x(O);H=E(T,"SPAN",{class:!0});var Z=x(H);R=E(Z,"SPAN",{class:!0});var nt=x(R);U=b(nt,It),nt.forEach(p),Y=b(Z," /\n            "),X=E(Z,"SPAN",{class:!0});var at=x(X);W=b(at,Dt),at.forEach(p),Z.forEach(p),F=k(T),J=E(T,"SPAN",{hidden:!0}),x(J).forEach(p),G=k(T),K=E(T,"DIV",{class:!0});var st=x(K);Q=E(st,"BUTTON",{type:!0,class:!0});var rt=x(Q);Nt.l(rt),rt.forEach(p),tt=k(st),et=E(st,"DIV",{class:!0});var it=x(et);lt=E(it,"DIV",{class:!0});var ct=x(lt);ot=E(ct,"DIV",{class:!0,style:!0}),x(ot).forEach(p),ct.forEach(p),it.forEach(p),st.forEach(p),mt=k(T),yt=E(T,"BUTTON",{type:!0,class:!0});var ut=x(yt);Ct.l(ut),ut.forEach(p),wt=k(T),$t=E(T,"BUTTON",{type:!0,class:!0});var ht=x($t);Rt&&Rt.l(ht),ht.forEach(p),xt=k(T),Ut&&Ut.l(T),T.forEach(p),g.forEach(p),h.forEach(p),Et=k(a),bt=E(a,"DIV",{class:!0,style:!0});var dt=x(bt);kt=E(dt,"OL",{class:!0});var pt=x(kt);for(let n=0;n<Xt.length;n+=1)Xt[n].l(pt);pt.forEach(p),dt.forEach(p),a.forEach(p),e.forEach(p),this.h()},h(){$(r,"class","aplayer-pic svelte-1a7j4k"),j(r,"background-image","url( "+e[5].cover+" )"),$(u,"class","aplayer-title svelte-1a7j4k"),$(_,"class","aplayer-artist svelte-1a7j4k"),$(c,"class","aplayer-music svelte-1a7j4k"),$(L,"class","aplayer-loaded svelte-1a7j4k"),j(L,"width",e[19].bufferPercentage),$(V,"class","aplayer-loading-icon"),j(V,"display",e[21]?"inline":"none"),$(P,"class","aplayer-thumb svelte-1a7j4k"),$(N,"class","aplayer-played svelte-1a7j4k"),j(N,"width",e[20].playPercentage),$(q,"class","aplayer-bar svelte-1a7j4k"),$(z,"class","aplayer-bar-wrap svelte-1a7j4k"),$(R,"class","aplayer-ptime"),$(X,"class","aplayer-dtime"),$(H,"class","aplayer-time-inner svelte-1a7j4k"),J.hidden=!0,$(Q,"type","button"),$(Q,"class","aplayer-icon aplayer-icon-volume-down svelte-1a7j4k"),$(ot,"class","aplayer-volume svelte-1a7j4k"),j(ot,"height",e[1].muted?"0px":e[22].volumePercentage),$(lt,"class","aplayer-volume-bar svelte-1a7j4k"),$(et,"class","aplayer-volume-bar-wrap svelte-1a7j4k"),$(K,"class","aplayer-volume-wrap svelte-1a7j4k"),$(yt,"type","button"),$(yt,"class","aplayer-icon aplayer-icon-order svelte-1a7j4k"),$($t,"type","button"),$($t,"class","aplayer-icon aplayer-icon-loop svelte-1a7j4k"),$(O,"class","aplayer-time svelte-1a7j4k"),$(S,"class","aplayer-controller svelte-1a7j4k"),$(i,"class","aplayer-info svelte-1a7j4k"),$(kt,"class","svelte-1a7j4k"),$(bt,"class","aplayer-list svelte-1a7j4k"),j(bt,"height",e[17].showList?`${e[16]}px`:"0px"),$(l,"class","aplayer-body  svelte-1a7j4k"),$(n,"class","aplayer svelte-1a7j4k"),T(n,"aplayer-withlrc",e[6].length>0),T(n,"aplayer-withlist",e[4].length>1),T(n,"aplayer-narrow",e[0]),T(n,"aplayer-mobile",Z)},m(t,a){d(t,n,a),h(n,l),h(l,r),zt.m(r,null),h(l,o),h(l,i),h(i,c),h(c,u),h(u,v),h(c,y),h(c,_),h(_,I),h(i,D),qt&&qt.m(i,null),h(i,A),h(i,S),h(S,z),h(z,q),h(q,L),h(q,B),h(q,N),h(N,P),h(P,V),V.innerHTML='<svg\n                    xmlns="http://www.w3.org/2000/svg"\n                    version="1.1"\n                    viewBox="0 0 32 32"\n                    ><path\n                      d="M4 16c0-6.6 5.4-12 12-12s12 5.4 12 12c0 1.2-0.8 2-2 2s-2-0.8-2-2c0-4.4-3.6-8-8-8s-8 3.6-8 8 3.6 8 8 8c1.2 0 2 0.8 2 2s-0.8 2-2 2c-6.6 0-12-5.4-12-12z"\n                    /></svg\n                  >',e[55](z),h(S,C),h(S,O),h(O,H),h(H,R),h(R,U),h(H,Y),h(H,X),h(X,W),h(O,F),h(O,J),h(O,G),h(O,K),h(K,Q),Nt.m(Q,null),h(K,tt),h(K,et),h(et,lt),h(lt,ot),e[57](lt),h(O,mt),h(O,yt),Ct.m(yt,null),h(O,wt),h(O,$t),Rt&&Rt.m($t,null),h(O,xt),Ut&&Ut.m(O,null),h(l,Et),h(l,bt),h(bt,kt);for(let e=0;e<Xt.length;e+=1)Xt[e].m(kt,null);e[62](bt),e[63](n),Mt||(jt=[w(r,"click",e[54]),w(z,"mousedown",(function(){s(e[13])&&e[13].apply(this,arguments)})),w(z,"mousemove",(function(){s(e[14])&&e[14].apply(this,arguments)})),w(z,"mouseup",(function(){s(e[15])&&e[15].apply(this,arguments)})),w(z,"mouseleave",(function(){s(e[15])&&e[15].apply(this,arguments)})),w(z,"touchstart",(function(){s(e[13])&&e[13].apply(this,arguments)})),w(z,"touchmove",(function(){s(e[14])&&e[14].apply(this,arguments)})),w(z,"touchend",(function(){s(e[15])&&e[15].apply(this,arguments)})),w(Q,"click",e[56],!0),w(et,"mousedown",(function(){s(e[10])&&e[10].apply(this,arguments)})),w(et,"mousemove",(function(){s(e[11])&&e[11].apply(this,arguments)})),w(et,"mouseup",(function(){s(e[12])&&e[12].apply(this,arguments)})),w(et,"mouseleave",(function(){s(e[12])&&e[12].apply(this,arguments)})),w(et,"touchstart",(function(){s(e[10])&&e[10].apply(this,arguments)})),w(et,"touchmove",(function(){s(e[11])&&e[11].apply(this,arguments)})),w(et,"touchend",(function(){s(e[12])&&e[12].apply(this,arguments)})),w(yt,"click",e[58]),w($t,"click",e[59])],Mt=!0)},p(t,l){if(St!==(St=At(e=t))&&(zt.d(1),zt=St(e),zt&&(zt.c(),zt.m(r,null))),32&l[0]&&j(r,"background-image","url( "+e[5].cover+" )"),32&l[0]&&Tt!==(Tt=e[5].name+"")&&M(v,Tt),32&l[0]&&_t!==(_t=e[5].artist+"")&&M(I,_t),e[5].lrc?qt?qt.p(e,l):(qt=rt(e),qt.c(),qt.m(i,A)):qt&&(qt.d(1),qt=null),524288&l[0]&&j(L,"width",e[19].bufferPercentage),2097152&l[0]&&j(V,"display",e[21]?"inline":"none"),1048576&l[0]&&j(N,"width",e[20].playPercentage),1048576&l[0]&&It!==(It=e[20].ptime+"")&&M(U,It),1048576&l[0]&&Dt!==(Dt=e[20].duration+"")&&M(W,Dt),Bt===(Bt=Lt(e))&&Nt?Nt.p(e,l):(Nt.d(1),Nt=Bt(e),Nt&&(Nt.c(),Nt.m(Q,null))),4194306&l[0]&&j(ot,"height",e[1].muted?"0px":e[22].volumePercentage),Vt===(Vt=Pt(e))&&Ct?Ct.p(e,l):(Ct.d(1),Ct=Vt(e),Ct&&(Ct.c(),Ct.m(yt,null))),Ht===(Ht=Ot(e))&&Rt?Rt.p(e,l):(Rt&&Rt.d(1),Rt=Ht&&Ht(e),Rt&&(Rt.c(),Rt.m($t,null))),e[4].length>1?Ut?Ut.p(e,l):(Ut=vt(e),Ut.c(),Ut.m(O,null)):Ut&&(Ut.d(1),Ut=null),262162&l[0]){let t;for(Yt=e[4],t=0;t<Yt.length;t+=1){const n=nt(e,Yt,t);Xt[t]?Xt[t].p(n,l):(Xt[t]=gt(n),Xt[t].c(),Xt[t].m(kt,null))}for(;t<Xt.length;t+=1)Xt[t].d(1);Xt.length=Yt.length}196608&l[0]&&j(bt,"height",e[17].showList?`${e[16]}px`:"0px"),64&l[0]&&T(n,"aplayer-withlrc",e[6].length>0),16&l[0]&&T(n,"aplayer-withlist",e[4].length>1),1&l[0]&&T(n,"aplayer-narrow",e[0])},i:t,o:t,d(t){t&&p(n),zt.d(),qt&&qt.d(),e[55](null),Nt.d(),e[57](null),Ct.d(),Rt&&Rt.d(),Ut&&Ut.d(),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(Xt,t),e[62](null),e[63](null),Mt=!1,a(jt)}}}function wt(t,n,l){let a,s,r,o,h,d,p,f,v,m,g,y,w,$,x,E,b;var k,M;const j=A(),T=S(),_=(t,e)=>{T(t,e),j.dispatchEvent&&j.dispatchEvent(new CustomEvent(t,{detail:e}))},{player:I,playList:D,audioList:z,currentSong:L,rdTime:B,currentTime:N,duration:P,rdBufTime:V,wtBufTime:C,loading:O,lrc:H,controlState:R,volumeState:U}=function(t){const e=document.createElement("audio");et.push(e),function(t,e){["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"].forEach((n=>{t.addEventListener(n,(t=>{e(n,t)}))}))}(e,t);let n=G(0),l=G(NaN);const a=K([n,l],(([t,e])=>{let n=t/e;return n=Math.max(n,0),n=Math.min(n,1),n*=100,{ptime:Q(t),duration:Q(e),playPercentage:`${n}%`}}));let s=G(0);const r=K([s,l],(([t,e])=>{let n=t/e;return n=Math.max(n,0),n=Math.min(n,1),n*=100,{bufferPercentage:`${n}%`,bufTime:t}})),o=G({playingIndex:0,audio:[]}),i=K(o,(t=>t.audio)),c=G({volume:.7,loop:"all",order:"list",showList:!0}),u=K(c,(t=>({volumePercentage:100*t.volume+"%",muted:0===t.volume}))),h=K(o,(t=>t.audio[t.playingIndex])),d=K([r,n],(([{bufTime:t},n])=>!e.paused&&(e.readyState<=HTMLMediaElement.HAVE_CURRENT_DATA||t-n<2&&e.readyState===HTMLMediaElement.HAVE_FUTURE_DATA))),p=K(h,((t,e)=>{if(!t||!t.lrc)return void e([]);const n=t.lrc;n.startsWith("http")?fetch(n).then((t=>{if(!t.ok)throw new Error(`${t.statusText} canot loading lrc from ${n}`);return t.text()})).then((t=>{e(tt(t))})).catch((t=>{throw e([]),console.error(t),t})):e(tt(n))}),[]);let f=!1;h.subscribe((e=>{f&&t("listswitch",e),f=!0}));let v=!1;return i.subscribe((e=>{v&&t("listchange",e),v=!0})),p.subscribe((e=>{e.length>0?t("lrcshow"):t("lrchide")})),{player:e,playList:o,audioList:i,currentSong:h,rdTime:a,currentTime:n,duration:l,rdBufTime:r,wtBufTime:s,loading:d,lrc:p,controlState:c,volumeState:u}}(_);i(t,D,(t=>l(18,p=t))),i(t,z,(t=>l(4,f=t))),i(t,L,(t=>l(5,v=t))),i(t,B,(t=>l(20,x=t))),i(t,N,(t=>l(66,g=t))),i(t,P,(t=>l(67,y=t))),i(t,V,(t=>l(19,$=t))),i(t,C,(t=>l(68,w=t))),i(t,O,(t=>l(21,E=t))),i(t,H,(t=>l(6,m=t))),i(t,R,(t=>l(17,d=t))),i(t,U,(t=>l(22,b=t)));let Y,{audio:X}=n,{order:W=d.order}=n,{loop:F=d.loop}=n,{volume:J=d.volume}=n,{mini:Z=!1}=n,{mutex:nt=!0}=n,{autoplay:lt=!1}=n,{theme:at="#fadfa3"}=n,{list_max_height:st=1/0}=n,rt=!1,{base_font_size:ot="12"}=n;const it=()=>{nt&&et.forEach((t=>t.pause())),I.play().catch((t=>{console.error(t)}))};let ct=-1;I.addEventListener("timeupdate",(()=>{if(u(N,g=I.currentTime,g),h.includes("lrc")){for(;ct>0&&I.currentTime<m[ct][0];)l(7,ct--,ct);for(;ct+1<m.length&&I.currentTime>=m[ct+1][0];)l(7,ct++,ct)}})),I.addEventListener("volumechange",(()=>{u(R,d.volume=I.volume,d)})),I.addEventListener("loadedmetadata",(()=>{u(P,y=I.duration,y)})),I.addEventListener("error",(()=>{console.warn("An audio error has occurred, player will skip forward in 2 seconds."),f.length>1&&setTimeout((()=>{u(D,p.playingIndex=(p.playingIndex+1)%f.length,p),I.paused&&it()}),2e3)}));const ut=()=>{const t=I.buffered.length?I.buffered.end(I.buffered.length-1):0;u(C,w=t,w)};I.addEventListener("progress",ut),I.addEventListener("canplay",ut),I.addEventListener("durationchange",(()=>{u(P,y=I.duration,y)}));let ht,dt,pt,ft,vt,mt,gt,yt,wt;I.addEventListener("ended",(()=>{const t=f,e=(p.playingIndex+1)%t.length;if("none"===d.loop){if("list"===d.order)p.playingIndex<t.length-1?(u(D,p.playingIndex=e,p),l(1,I.currentTime=0,I)):(u(D,p.playingIndex=(p.playingIndex+1)%t.length,p),l(48,Y=!0),I.pause());else if("random"===d.order){const n=Math.floor(t.length*Math.random());n===p.playingIndex?u(D,p.playingIndex=e,p):u(D,p.playingIndex=n,p),l(1,I.currentTime=0,I)}}else"one"===d.loop?l(1,I.currentTime=0,I):"all"===d.loop&&u(D,p.playingIndex=e,p)}));let $t,xt=0;var Et;Et=()=>{"localhost"===location.hostname&&(window.theAudio=I);const t=function(t,e){let n=!1;return{volumeDragStart:()=>{n=!0},volumeDragMove:l=>{if(n){let n=1-((l.clientY||l.changedTouches[0].clientY)-e.getBoundingClientRect().top)/e.clientHeight;n=Math.max(n,0),n=Math.min(n,1),t.volume=n}},volumeDragEnd:l=>{if(n){let a=1-((l.clientY||l.changedTouches[0].clientY)-e.getBoundingClientRect().top)/e.clientHeight;a=Math.max(a,0),a=Math.min(a,1),t.volume=a,n=!1}}}}(I,ht);l(10,pt=t.volumeDragStart),l(11,ft=t.volumeDragMove),l(12,vt=t.volumeDragEnd);const e=function(t,e){let n=!1;return{progressDragStart:()=>{n=!0},progressDragMove:l=>{if(n){let n=((l.clientX||l.changedTouches[0].clientX)-e.getBoundingClientRect().left)/e.clientWidth;n=Math.max(n,0),n=Math.min(n,1),t.currentTime=t.duration*n}},progressDragEnd:l=>{if(n){n=!1;let a=((l.clientX||l.changedTouches[0].clientX)-e.getBoundingClientRect().left)/e.clientWidth;a=Math.max(a,0),a=Math.min(a,1),t.currentTime=t.duration*a}}}}(I,dt);l(13,mt=e.progressDragStart),l(14,gt=e.progressDragMove),l(15,yt=e.progressDragEnd)},A().$$.on_mount.push(Et),function(t){A().$$.on_destroy.push(t)}((()=>{_("destroy")}));return t.$$set=t=>{l(73,n=e(e({},n),c(t))),"audio"in t&&l(37,X=t.audio),"order"in t&&l(38,W=t.order),"loop"in t&&l(39,F=t.loop),"volume"in t&&l(40,J=t.volume),"mini"in t&&l(0,Z=t.mini),"mutex"in t&&l(41,nt=t.mutex),"autoplay"in t&&l(42,lt=t.autoplay),"theme"in t&&l(43,at=t.theme),"list_max_height"in t&&l(44,st=t.list_max_height),"base_font_size"in t&&l(45,ot=t.base_font_size)},t.$$.update=()=>{264256&t.$$.dirty[1]&&(l(48,Y=!!rt||!lt),l(49,rt=!0)),64&t.$$.dirty[1]&&l(50,a="string"==typeof X?JSON.parse(X):X),524288&t.$$.dirty[1]&&u(D,p.audio=Array.isArray(a)?a:[a],p),l(51,s=!function(t,e){const n=t[e];return!(null==n||"false"===n)}(n,"list_folded")&&f.length>1),1048576&t.$$.dirty[1]&&u(R,d.showList=s,d),256&t.$$.dirty[1]&&u(R,d.loop=F,d),128&t.$$.dirty[1]&&u(R,d.order=W,d),512&t.$$.dirty[1]&&u(R,d.volume=J,d),4&t.$$.dirty[0]|40960&t.$$.dirty[1]&&l(16,xt=Math.min(null!==l(46,k=null==wt?void 0:wt.scrollHeight)&&void 0!==k?k:0,st)),512&t.$$.dirty[1]&&l(1,I.volume=J,I),32&t.$$.dirty[0]&&l(1,I.src=v.url,I),32&t.$$.dirty[0]|69632&t.$$.dirty[1]&&l(52,r=null!==l(47,M=v.theme)&&void 0!==M?M:at),16384&t.$$.dirty[1]&&l(53,o=String(ot).match(/^\d+/)[0]+"px"),8&t.$$.dirty[0]|6291456&t.$$.dirty[1]&&$t&&($t.style.setProperty("--theme-color",r),$t.style.setProperty("--base-font-size",o)),64&t.$$.dirty[0]&&(h=m&&m.length>0?"withlrc":""),2&t.$$.dirty[0]|131072&t.$$.dirty[1]&&(I.src,l(7,ct=-1),Y||it(),l(48,Y=!1))},n=c(n),[Z,I,wt,$t,f,v,m,ct,ht,dt,pt,ft,vt,mt,gt,yt,xt,d,p,$,x,E,b,_,D,z,L,B,N,P,V,C,O,H,R,U,it,X,W,F,J,nt,lt,at,st,ot,k,M,Y,rt,a,s,r,o,()=>{I.paused?it():I.pause()},function(t){q[t?"unshift":"push"]((()=>{dt=t,l(9,dt)}))},()=>{l(1,I.muted=!I.muted,I)},function(t){q[t?"unshift":"push"]((()=>{ht=t,l(8,ht)}))},()=>{u(R,d.order="list"===d.order?"random":"list",d)},()=>{"all"===d.loop?u(R,d.loop="one",d):"one"===d.loop?u(R,d.loop="none",d):"none"===d.loop&&u(R,d.loop="all",d)},()=>{u(R,d.showList=!d.showList,d),d.showList?_("listshow"):_("listhide")},t=>{u(D,p.playingIndex=t,p),l(1,I.currentTime=0,I)},function(t){q[t?"unshift":"push"]((()=>{wt=t,l(2,wt)}))},function(t){q[t?"unshift":"push"]((()=>{$t=t,l(3,$t)}))}]}return class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),F(this,t,wt,yt,r,{audio:37,order:38,loop:39,volume:40,mini:0,mutex:41,autoplay:42,theme:43,list_max_height:44,base_font_size:45},[-1,-1,-1])}}}));
