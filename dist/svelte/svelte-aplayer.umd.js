!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Aplayer=e()}(this,(function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function l(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function i(t,e,n){t.$$.on_destroy.push(a(e,n))}function c(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function u(t,e,n=e){return t.set(n),e}function h(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function y(){return m("")}function w(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t){return Array.from(t.childNodes)}function E(t,e,n,l){for(let s=0;s<t.length;s+=1){const l=t[s];if(l.nodeName===e){let e=0;const r=[];for(;e<l.attributes.length;){const t=l.attributes[e++];n[t.name]||r.push(t.name)}for(let t=0;t<r.length;t++)l.removeAttribute(r[t]);return t.splice(s,1)[0]}}return l?v(e):p(e)}function b(t,e){for(let n=0;n<t.length;n+=1){const l=t[n];if(3===l.nodeType)return l.data=""+e,t.splice(n,1)[0]}return m(e)}function q(t){return b(t," ")}function M(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function T(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function I(t,e,n){t.classList[n?"add":"remove"](e)}class D{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=p(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)d(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(f)}}let A;function _(t){A=t}function S(t){(function(){if(!A)throw new Error("Function called outside component initialization");return A})().$$.on_mount.push(t)}const k=[],B=[],N=[],L=[],P=Promise.resolve();let V=!1;function z(t){N.push(t)}let O=!1;const H=new Set;function C(){if(!O){O=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];_(e),R(e.$$)}for(_(null),k.length=0;B.length;)B.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];H.has(e)||(H.add(e),e())}N.length=0}while(k.length);for(;L.length;)L.pop()();V=!1,O=!1,H.clear()}}function R(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}const U=new Set;function j(t,e){t&&t.i&&(U.delete(t),t.i(e))}function Y(t,e){t.d(1),e.delete(t.key)}function X(t,e){-1===t.$$.dirty[0]&&(k.push(t),V||(V=!0,P.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,o,a,i,c,u,h=[-1]){const d=A;_(e);const p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:l(),dirty:h,skip_bound:!1};let v=!1;if(p.ctx=a?a(e,o.props||{},((t,n,...l)=>{const s=l.length?l[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),v&&X(e,t)),n})):[],p.update(),v=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const t=$(o.target);p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();o.intro&&j(e.$$.fragment),function(t,e,l,o){const{fragment:a,on_mount:i,on_destroy:c,after_update:u}=t.$$;a&&a.m(e,l),o||z((()=>{const e=i.map(n).filter(r);c?c.push(...e):s(e),t.$$.on_mount=[]})),u.forEach(z)}(e,o.target,o.anchor,o.customElement),C()}_(d)}const F=[];function J(e,n=t){let l;const s=[];function r(t){if(o(e,t)&&(e=t,l)){const t=!F.length;for(let n=0;n<s.length;n+=1){const t=s[n];t[1](),F.push(t,e)}if(t){for(let t=0;t<F.length;t+=2)F[t][0](F[t+1]);F.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(o,a=t){const i=[o,a];return s.push(i),1===s.length&&(l=n(r)||t),o(e),()=>{const t=s.indexOf(i);-1!==t&&s.splice(t,1),0===s.length&&(l(),l=null)}}}}function G(e,n,l){const o=!Array.isArray(e),i=o?[e]:e,c=n.length<2;return{subscribe:J(l,(e=>{let l=!1;const u=[];let h=0,d=t;const f=()=>{if(h)return;d();const l=n(o?u[0]:u,e);c?e(l):d=r(l)?l:t},p=i.map(((t,e)=>a(t,(t=>{u[e]=t,h&=~(1<<e),l&&f()}),(()=>{h|=1<<e}))));return l=!0,f(),function(){s(p),d()}})).subscribe}}const K=t=>{const e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),l=Math.floor(t-3600*e-60*n);return(e>0?[e,n,l]:[n,l]).map((t=>t<10?"0"+t:""+t)).join(":")},Q=/mobile/i.test(window.navigator.userAgent);function Z(t){if(t){const e=(t=t.replace(/([^\]^\n])\[/g,((t,e)=>e+"\n["))).split("\n");let n=[];const l=e.length;for(let t=0;t<l;t++){const l=e[t].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),s=e[t].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(l){const t=l.length;for(let e=0;e<t;e++){const t=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(l[e]),r=60*t[1]+parseInt(t[2])+(t[4]?parseInt(t[4])/(2===(t[4]+"").length?100:1e3):0);n.push([r,s])}}}return n=n.filter((t=>t[1])),n.sort(((t,e)=>t[0]-e[0])),n}return[]}console.log("\n %c Svelte APlayer v0.0.9 fb66cef %c http://svelte-aplayer.js.org \n\n","color: #fff; background: #ff3e00; padding:5px 0;","background: #fadfa3; padding:5px 0;");const tt=[];function et(t,e,n){const l=t.slice();return l[66]=e[n],l[68]=n,l}function nt(t,e,n){const l=t.slice();return l[69]=e[n],l[71]=n,l}function lt(t){let e,n,l;return{c(){e=p("div"),n=v("svg"),l=v("path"),this.h()},l(t){e=E(t,"DIV",{class:!0});var s=$(e);n=E(s,"svg",{xmlns:!0,version:!0,viewBox:!0,class:!0},1);var r=$(n);l=E(r,"path",{d:!0,class:!0},1),$(l).forEach(f),r.forEach(f),s.forEach(f),this.h()},h(){x(l,"d","M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"),x(l,"class","svelte-3s9nfq"),x(n,"xmlns","http://www.w3.org/2000/svg"),x(n,"version","1.1"),x(n,"viewBox","0 0 16 31"),x(n,"class","svelte-3s9nfq"),x(e,"class","aplayer-button aplayer-play svelte-3s9nfq")},m(t,s){d(t,e,s),h(e,n),h(n,l)},d(t){t&&f(e)}}}function st(t){let e,n,l;return{c(){e=p("div"),n=v("svg"),l=v("path"),this.h()},l(t){e=E(t,"DIV",{class:!0});var s=$(e);n=E(s,"svg",{xmlns:!0,version:!0,viewBox:!0,class:!0},1);var r=$(n);l=E(r,"path",{d:!0,class:!0},1),$(l).forEach(f),r.forEach(f),s.forEach(f),this.h()},h(){x(l,"d","M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"),x(l,"class","svelte-3s9nfq"),x(n,"xmlns","http://www.w3.org/2000/svg"),x(n,"version","1.1"),x(n,"viewBox","0 0 17 32"),x(n,"class","svelte-3s9nfq"),x(e,"class","aplayer-button aplayer-pause svelte-3s9nfq")},m(t,s){d(t,e,s),h(e,n),h(n,l)},d(t){t&&f(e)}}}function rt(t){let e,n,l=[],s=new Map,r=t[6];const o=t=>t[69][0];for(let a=0;a<r.length;a+=1){let e=nt(t,r,a),n=o(e);s.set(n,l[a]=ot(n,e))}return{c(){e=p("div"),n=p("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=E(t,"DIV",{class:!0});var s=$(e);n=E(s,"DIV",{class:!0,style:!0});var r=$(n);for(let e=0;e<l.length;e+=1)l[e].l(r);r.forEach(f),s.forEach(f),this.h()},h(){x(n,"class","aplayer-lrc-contents svelte-3s9nfq"),T(n,"transform","translateY("+-16*Math.max(t[7],0)+"px)"),x(e,"class","aplayer-lrc svelte-3s9nfq")},m(t,s){d(t,e,s),h(e,n);for(let e=0;e<l.length;e+=1)l[e].m(n,null)},p(t,e){192&e[0]&&(r=t[6],l=function(t,e,n,l,s,r,o,a,i,c,u,h){let d=t.length,f=r.length,p=d;const v={};for(;p--;)v[t[p].key]=p;const m=[],g=new Map,y=new Map;for(p=f;p--;){const t=h(s,r,p),a=n(t);let i=o.get(a);i?l&&i.p(t,e):(i=c(a,t),i.c()),g.set(a,m[p]=i),a in v&&y.set(a,Math.abs(p-v[a]))}const w=new Set,x=new Set;function $(t){j(t,1),t.m(a,u),o.set(t.key,t),u=t.first,f--}for(;d&&f;){const e=m[f-1],n=t[d-1],l=e.key,s=n.key;e===n?(u=e.first,d--,f--):g.has(s)?!o.has(l)||w.has(l)?$(e):x.has(s)?d--:y.get(l)>y.get(s)?(x.add(l),$(e)):(w.add(s),d--):(i(n,o),d--)}for(;d--;){const e=t[d];g.has(e.key)||i(e,o)}for(;f;)$(m[f-1]);return m}(l,e,o,1,t,r,s,n,Y,ot,null,nt)),128&e[0]&&T(n,"transform","translateY("+-16*Math.max(t[7],0)+"px)")},d(t){t&&f(e);for(let e=0;e<l.length;e+=1)l[e].d()}}}function ot(t,e){let n,l,s,r=e[69][1]+"";return{key:t,first:null,c(){n=p("p"),l=m(r),s=g(),this.h()},l(t){n=E(t,"P",{class:!0});var e=$(n);l=b(e,r),s=q(e),e.forEach(f),this.h()},h(){x(n,"class","svelte-3s9nfq"),I(n,"aplayer-lrc-current",e[71]===e[7]),this.first=n},m(t,e){d(t,n,e),h(n,l),h(n,s)},p(t,s){e=t,64&s[0]&&r!==(r=e[69][1]+"")&&M(l,r),192&s[0]&&I(n,"aplayer-lrc-current",e[71]===e[7])},d(t){t&&f(n)}}}function at(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new D(l)},m(t,e){n.m('<svg\n                  xmlns="http://www.w3.org/2000/svg"\n                  version="1.1"\n                  viewBox="0 0 28 32"\n                  ><path\n                    d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"\n                  /></svg\n        >',t,e),d(t,l,e)},p:t,d(t){t&&f(l),t&&n.d()}}}function it(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new D(l)},m(t,e){n.m('<svg\n                  xmlns="http://www.w3.org/2000/svg"\n                  version="1.1"\n                  viewBox="0 0 28 32"\n                  ><path\n                    d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"\n                  /></svg\n                >',t,e),d(t,l,e)},p:t,d(t){t&&f(l),t&&n.d()}}}function ct(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new D(l)},m(t,e){n.m('<svg\n                xmlns="http://www.w3.org/2000/svg"\n                version="1.1"\n                viewBox="0 0 32 32"\n                ><path\n                  d="M0.622 18.334h19.54v7.55l11.052-9.412-11.052-9.413v7.549h-19.54v3.725z"\n                /></svg\n              >',t,e),d(t,l,e)},p:t,d(t){t&&f(l),t&&n.d()}}}function ut(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new D(l)},m(t,e){n.m('<svg\n                xmlns="http://www.w3.org/2000/svg"\n                version="1.1"\n                viewBox="0 0 32 32"\n                ><path\n                  d="M22.667 4l7 6-7 6 7 6-7 6v-4h-3.653l-3.76-3.76 2.827-2.827 2.587 2.587h2v-8h-2l-12 12h-6v-4h4.347l12-12h3.653v-4zM2.667 8h6l3.76 3.76-2.827 2.827-2.587-2.587h-4.347v-4z"\n                /></svg\n              >',t,e),d(t,l,e)},p:t,d(t){t&&f(l),t&&n.d()}}}function ht(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new D(l)},m(t,e){n.m(' <svg\n                xmlns="http://www.w3.org/2000/svg"\n                version="1.1"\n                viewBox="0 0 29 32"\n                ><path\n                  d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333z"\n                /></svg\n              >',t,e),d(t,l,e)},p:t,d(t){t&&f(l),t&&n.d()}}}function dt(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new D(l)},m(t,e){n.m('<svg\n                xmlns="http://www.w3.org/2000/svg"\n                version="1.1"\n                viewBox="0 0 33 32"\n                ><path\n                  d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333zM17.333 20v-8h-1.333l-2.667 1.333v1.333h2v5.333h2z"\n                /></svg\n              >',t,e),d(t,l,e)},p:t,d(t){t&&f(l),t&&n.d()}}}function ft(e){let n,l;return{c(){l=y(),this.h()},l(t){l=y(),this.h()},h(){n=new D(l)},m(t,e){n.m('<svg\n                xmlns="http://www.w3.org/2000/svg"\n                version="1.1"\n                viewBox="0 0 29 32"\n                ><path\n                  d="M2.667 7.027l1.707-1.693 22.293 22.293-1.693 1.707-4-4h-11.64v4l-5.333-5.333 5.333-5.333v4h8.973l-8.973-8.973v0.973h-2.667v-3.64l-4-4zM22.667 17.333h2.667v5.573l-2.667-2.667v-2.907zM22.667 6.667v-4l5.333 5.333-5.333 5.333v-4h-10.907l-2.667-2.667h13.573z"\n                /></svg\n              >',t,e),d(t,l,e)},p:t,d(t){t&&f(l),t&&n.d()}}}function pt(e){let n,l,s,r,o;return{c(){n=p("button"),l=v("svg"),s=v("path"),this.h()},l(t){n=E(t,"BUTTON",{type:!0,class:!0});var e=$(n);l=E(e,"svg",{xmlns:!0,version:!0,viewBox:!0,class:!0},1);var r=$(l);s=E(r,"path",{d:!0,class:!0},1),$(s).forEach(f),r.forEach(f),e.forEach(f),this.h()},h(){x(s,"d","M20.8 14.4q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2zM1.6 11.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2zM20.8 20.8q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2z"),x(s,"class","svelte-3s9nfq"),x(l,"xmlns","http://www.w3.org/2000/svg"),x(l,"version","1.1"),x(l,"viewBox","0 0 22 32"),x(l,"class","svelte-3s9nfq"),x(n,"type","button"),x(n,"class","aplayer-icon aplayer-icon-menu svelte-3s9nfq")},m(t,a){d(t,n,a),h(n,l),h(l,s),r||(o=w(n,"click",e[54]),r=!0)},p:t,d(t){t&&f(n),r=!1,o()}}}function vt(t){let e;return{c(){e=p("span"),this.h()},l(t){e=E(t,"SPAN",{class:!0}),$(e).forEach(f),this.h()},h(){x(e,"class","aplayer-list-cur svelte-3s9nfq")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function mt(t){let e,n,l,s,r,o,a,i,c,u,v,y,T,I=t[68]+1+"",D=t[66].name+"",A=t[66].artist+"",_=t[68]===t[4].playingIndex&&vt();function S(){return t[55](t[68])}return{c(){e=p("li"),_&&_.c(),n=g(),l=p("span"),s=m(I),r=g(),o=p("span"),a=m(D),i=g(),c=p("span"),u=m(A),v=g(),this.h()},l(t){e=E(t,"LI",{class:!0});var h=$(e);_&&_.l(h),n=q(h),l=E(h,"SPAN",{class:!0});var d=$(l);s=b(d,I),d.forEach(f),r=q(h),o=E(h,"SPAN",{class:!0});var p=$(o);a=b(p,D),p.forEach(f),i=q(h),c=E(h,"SPAN",{class:!0});var m=$(c);u=b(m,A),m.forEach(f),v=q(h),h.forEach(f),this.h()},h(){x(l,"class","aplayer-list-index svelte-3s9nfq"),x(o,"class","aplayer-list-title"),x(c,"class","aplayer-list-artist svelte-3s9nfq"),x(e,"class","svelte-3s9nfq")},m(t,f){d(t,e,f),_&&_.m(e,null),h(e,n),h(e,l),h(l,s),h(e,r),h(e,o),h(o,a),h(e,i),h(e,c),h(c,u),h(e,v),y||(T=w(e,"click",S),y=!0)},p(l,s){(t=l)[68]===t[4].playingIndex?_||(_=vt(),_.c(),_.m(e,n)):_&&(_.d(1),_=null),16&s[0]&&D!==(D=t[66].name+"")&&M(a,D),16&s[0]&&A!==(A=t[66].artist+"")&&M(u,A)},d(t){t&&f(e),_&&_.d(),y=!1,T()}}}function gt(e){let n,l,o,a,i,c,u,v,y,D,A,_,S,k,B,N,L,P,V,z,O,H,C,R,U,j,Y,X,W,F,J,G,K,Z,tt,nt,ot,vt,gt,yt,wt,xt,$t,Et,bt,qt,Mt,Tt,It=e[5].name+"",Dt=e[5].artist+"",At=e[19].ptime+"",_t=e[19].duration+"";function St(t,e){return t[1].paused?lt:st}let kt=St(e),Bt=kt(e),Nt=e[5].lrc&&rt(e);function Lt(t,e){return t[21].muted||t[1].muted?it:at}let Pt=Lt(e),Vt=Pt(e);function zt(t,e){return"random"===t[17].order?ut:ct}let Ot=zt(e),Ht=Ot(e);function Ct(t,e){return"none"===t[17].loop?ft:"one"===t[17].loop?dt:"all"===t[17].loop?ht:void 0}let Rt=Ct(e),Ut=Rt&&Rt(e),jt=e[4].audio.length>1&&pt(e),Yt=e[4].audio,Xt=[];for(let t=0;t<Yt.length;t+=1)Xt[t]=mt(et(e,Yt,t));return{c(){n=p("div"),l=p("div"),o=p("div"),Bt.c(),a=g(),i=p("div"),c=p("div"),u=p("span"),v=m(It),y=g(),D=p("span"),A=m(Dt),_=g(),Nt&&Nt.c(),S=g(),k=p("div"),B=p("div"),N=p("div"),L=p("div"),P=g(),V=p("div"),z=p("div"),O=p("span"),H=g(),C=p("div"),R=p("span"),U=p("span"),j=m(At),Y=m(" /\n            "),X=p("span"),W=m(_t),F=g(),J=p("span"),G=g(),K=p("div"),Z=p("button"),Vt.c(),tt=g(),nt=p("div"),ot=p("div"),vt=p("div"),gt=g(),yt=p("button"),Ht.c(),wt=g(),xt=p("button"),Ut&&Ut.c(),$t=g(),jt&&jt.c(),Et=g(),bt=p("div"),qt=p("ol");for(let t=0;t<Xt.length;t+=1)Xt[t].c();this.h()},l(t){n=E(t,"DIV",{class:!0});var e=$(n);l=E(e,"DIV",{class:!0});var s=$(l);o=E(s,"DIV",{class:!0,style:!0});var r=$(o);Bt.l(r),r.forEach(f),a=q(s),i=E(s,"DIV",{class:!0});var h=$(i);c=E(h,"DIV",{class:!0});var d=$(c);u=E(d,"SPAN",{class:!0});var p=$(u);v=b(p,It),p.forEach(f),y=q(d),D=E(d,"SPAN",{class:!0});var m=$(D);A=b(m,Dt),m.forEach(f),d.forEach(f),_=q(h),Nt&&Nt.l(h),S=q(h),k=E(h,"DIV",{class:!0});var g=$(k);B=E(g,"DIV",{class:!0});var w=$(B);N=E(w,"DIV",{class:!0});var x=$(N);L=E(x,"DIV",{class:!0,style:!0}),$(L).forEach(f),P=q(x),V=E(x,"DIV",{class:!0,style:!0});var M=$(V);z=E(M,"DIV",{class:!0});var T=$(z);O=E(T,"SPAN",{class:!0,style:!0}),$(O).forEach(f),T.forEach(f),M.forEach(f),x.forEach(f),w.forEach(f),H=q(g),C=E(g,"DIV",{class:!0});var I=$(C);R=E(I,"SPAN",{class:!0});var Q=$(R);U=E(Q,"SPAN",{class:!0});var et=$(U);j=b(et,At),et.forEach(f),Y=b(Q," /\n            "),X=E(Q,"SPAN",{class:!0});var lt=$(X);W=b(lt,_t),lt.forEach(f),Q.forEach(f),F=q(I),J=E(I,"SPAN",{hidden:!0}),$(J).forEach(f),G=q(I),K=E(I,"DIV",{class:!0});var st=$(K);Z=E(st,"BUTTON",{type:!0,class:!0});var rt=$(Z);Vt.l(rt),rt.forEach(f),tt=q(st),nt=E(st,"DIV",{class:!0});var at=$(nt);ot=E(at,"DIV",{class:!0});var it=$(ot);vt=E(it,"DIV",{class:!0,style:!0}),$(vt).forEach(f),it.forEach(f),at.forEach(f),st.forEach(f),gt=q(I),yt=E(I,"BUTTON",{type:!0,class:!0});var ct=$(yt);Ht.l(ct),ct.forEach(f),wt=q(I),xt=E(I,"BUTTON",{type:!0,class:!0});var ut=$(xt);Ut&&Ut.l(ut),ut.forEach(f),$t=q(I),jt&&jt.l(I),I.forEach(f),g.forEach(f),h.forEach(f),Et=q(s),bt=E(s,"DIV",{class:!0,style:!0});var ht=$(bt);qt=E(ht,"OL",{class:!0});var dt=$(qt);for(let n=0;n<Xt.length;n+=1)Xt[n].l(dt);dt.forEach(f),ht.forEach(f),s.forEach(f),e.forEach(f),this.h()},h(){x(o,"class","aplayer-pic svelte-3s9nfq"),T(o,"background-image","url( "+e[5].cover+" )"),x(u,"class","aplayer-title svelte-3s9nfq"),x(D,"class","aplayer-artist svelte-3s9nfq"),x(c,"class","aplayer-music svelte-3s9nfq"),x(L,"class","aplayer-loaded svelte-3s9nfq"),T(L,"width",e[18].bufferPercentage),x(O,"class","aplayer-loading-icon"),T(O,"display",e[20]?"inline":"none"),x(z,"class","aplayer-thumb svelte-3s9nfq"),x(V,"class","aplayer-played svelte-3s9nfq"),T(V,"width",e[19].playPercentage),x(N,"class","aplayer-bar svelte-3s9nfq"),x(B,"class","aplayer-bar-wrap svelte-3s9nfq"),x(U,"class","aplayer-ptime"),x(X,"class","aplayer-dtime"),x(R,"class","aplayer-time-inner svelte-3s9nfq"),J.hidden=!0,x(Z,"type","button"),x(Z,"class","aplayer-icon aplayer-icon-volume-down svelte-3s9nfq"),x(vt,"class","aplayer-volume svelte-3s9nfq"),T(vt,"height",e[1].muted?"0px":e[21].volumePercentage),x(ot,"class","aplayer-volume-bar svelte-3s9nfq"),x(nt,"class","aplayer-volume-bar-wrap svelte-3s9nfq"),x(K,"class","aplayer-volume-wrap svelte-3s9nfq"),x(yt,"type","button"),x(yt,"class","aplayer-icon aplayer-icon-order svelte-3s9nfq"),x(xt,"type","button"),x(xt,"class","aplayer-icon aplayer-icon-loop svelte-3s9nfq"),x(C,"class","aplayer-time svelte-3s9nfq"),x(k,"class","aplayer-controller svelte-3s9nfq"),x(i,"class","aplayer-info svelte-3s9nfq"),x(qt,"class","svelte-3s9nfq"),x(bt,"class","aplayer-list svelte-3s9nfq"),T(bt,"height",e[17].showList?`${e[16]}px`:"0px"),x(l,"class","aplayer-body  svelte-3s9nfq"),x(n,"class","aplayer svelte-3s9nfq"),I(n,"aplayer-withlrc",e[6].length>0),I(n,"aplayer-withlist",e[4].audio.length>1),I(n,"aplayer-narrow",e[0]),I(n,"aplayer-mobile",Q)},m(t,s){d(t,n,s),h(n,l),h(l,o),Bt.m(o,null),h(l,a),h(l,i),h(i,c),h(c,u),h(u,v),h(c,y),h(c,D),h(D,A),h(i,_),Nt&&Nt.m(i,null),h(i,S),h(i,k),h(k,B),h(B,N),h(N,L),h(N,P),h(N,V),h(V,z),h(z,O),O.innerHTML='<svg\n                    xmlns="http://www.w3.org/2000/svg"\n                    version="1.1"\n                    viewBox="0 0 32 32"\n                    ><path\n                      d="M4 16c0-6.6 5.4-12 12-12s12 5.4 12 12c0 1.2-0.8 2-2 2s-2-0.8-2-2c0-4.4-3.6-8-8-8s-8 3.6-8 8 3.6 8 8 8c1.2 0 2 0.8 2 2s-0.8 2-2 2c-6.6 0-12-5.4-12-12z"\n                    /></svg\n                  >',e[49](B),h(k,H),h(k,C),h(C,R),h(R,U),h(U,j),h(R,Y),h(R,X),h(X,W),h(C,F),h(C,J),h(C,G),h(C,K),h(K,Z),Vt.m(Z,null),h(K,tt),h(K,nt),h(nt,ot),h(ot,vt),e[51](ot),h(C,gt),h(C,yt),Ht.m(yt,null),h(C,wt),h(C,xt),Ut&&Ut.m(xt,null),h(C,$t),jt&&jt.m(C,null),h(l,Et),h(l,bt),h(bt,qt);for(let e=0;e<Xt.length;e+=1)Xt[e].m(qt,null);e[56](bt),e[57](n),Mt||(Tt=[w(o,"click",e[48]),w(B,"mousedown",(function(){r(e[13])&&e[13].apply(this,arguments)})),w(B,"mousemove",(function(){r(e[14])&&e[14].apply(this,arguments)})),w(B,"mouseup",(function(){r(e[15])&&e[15].apply(this,arguments)})),w(B,"mouseleave",(function(){r(e[15])&&e[15].apply(this,arguments)})),w(B,"touchstart",(function(){r(e[13])&&e[13].apply(this,arguments)})),w(B,"touchmove",(function(){r(e[14])&&e[14].apply(this,arguments)})),w(B,"touchend",(function(){r(e[15])&&e[15].apply(this,arguments)})),w(Z,"click",e[50],!0),w(nt,"mousedown",(function(){r(e[10])&&e[10].apply(this,arguments)})),w(nt,"mousemove",(function(){r(e[11])&&e[11].apply(this,arguments)})),w(nt,"mouseup",(function(){r(e[12])&&e[12].apply(this,arguments)})),w(nt,"mouseleave",(function(){r(e[12])&&e[12].apply(this,arguments)})),w(nt,"touchstart",(function(){r(e[10])&&e[10].apply(this,arguments)})),w(nt,"touchmove",(function(){r(e[11])&&e[11].apply(this,arguments)})),w(nt,"touchend",(function(){r(e[12])&&e[12].apply(this,arguments)})),w(yt,"click",e[52]),w(xt,"click",e[53])],Mt=!0)},p(t,l){if(kt!==(kt=St(e=t))&&(Bt.d(1),Bt=kt(e),Bt&&(Bt.c(),Bt.m(o,null))),32&l[0]&&T(o,"background-image","url( "+e[5].cover+" )"),32&l[0]&&It!==(It=e[5].name+"")&&M(v,It),32&l[0]&&Dt!==(Dt=e[5].artist+"")&&M(A,Dt),e[5].lrc?Nt?Nt.p(e,l):(Nt=rt(e),Nt.c(),Nt.m(i,S)):Nt&&(Nt.d(1),Nt=null),262144&l[0]&&T(L,"width",e[18].bufferPercentage),1048576&l[0]&&T(O,"display",e[20]?"inline":"none"),524288&l[0]&&T(V,"width",e[19].playPercentage),524288&l[0]&&At!==(At=e[19].ptime+"")&&M(j,At),524288&l[0]&&_t!==(_t=e[19].duration+"")&&M(W,_t),Pt===(Pt=Lt(e))&&Vt?Vt.p(e,l):(Vt.d(1),Vt=Pt(e),Vt&&(Vt.c(),Vt.m(Z,null))),2097154&l[0]&&T(vt,"height",e[1].muted?"0px":e[21].volumePercentage),Ot===(Ot=zt(e))&&Ht?Ht.p(e,l):(Ht.d(1),Ht=Ot(e),Ht&&(Ht.c(),Ht.m(yt,null))),Rt===(Rt=Ct(e))&&Ut?Ut.p(e,l):(Ut&&Ut.d(1),Ut=Rt&&Rt(e),Ut&&(Ut.c(),Ut.m(xt,null))),e[4].audio.length>1?jt?jt.p(e,l):(jt=pt(e),jt.c(),jt.m(C,null)):jt&&(jt.d(1),jt=null),18&l[0]){let t;for(Yt=e[4].audio,t=0;t<Yt.length;t+=1){const n=et(e,Yt,t);Xt[t]?Xt[t].p(n,l):(Xt[t]=mt(n),Xt[t].c(),Xt[t].m(qt,null))}for(;t<Xt.length;t+=1)Xt[t].d(1);Xt.length=Yt.length}196608&l[0]&&T(bt,"height",e[17].showList?`${e[16]}px`:"0px"),64&l[0]&&I(n,"aplayer-withlrc",e[6].length>0),16&l[0]&&I(n,"aplayer-withlist",e[4].audio.length>1),1&l[0]&&I(n,"aplayer-narrow",e[0])},i:t,o:t,d(t){t&&f(n),Bt.d(),Nt&&Nt.d(),e[49](null),Vt.d(),e[51](null),Ht.d(),Ut&&Ut.d(),jt&&jt.d(),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(Xt,t),e[56](null),e[57](null),Mt=!1,s(Tt)}}}function yt(t,n,l){let s,r,o,a,h,d,f,p,v,m,g,y,w,x,$;var E,b;const{player:q,playList:M,currentSong:T,rdTime:I,currentTime:D,duration:A,rdBufTime:_,wtBufTime:k,loading:N,lrc:L,controlState:P,volumeState:V}=function(){const t=document.createElement("audio");tt.push(t);let e=J(0),n=J(NaN);const l=G([e,n],(([t,e])=>{let n=t/e;return n=Math.max(n,0),n=Math.min(n,1),n*=100,{ptime:K(t),duration:K(e),playPercentage:`${n}%`}}));let s=J(0);const r=G([s,n],(([t,e])=>{let n=t/e;return n=Math.max(n,0),n=Math.min(n,1),n*=100,{bufferPercentage:`${n}%`,bufTime:t}})),o=J({playingIndex:0,audio:[]}),a=J({volume:.7,loop:"all",order:"list",showList:!0}),i=G(a,(t=>({volumePercentage:100*t.volume+"%",muted:0===t.volume}))),c=G(o,(t=>t.audio[t.playingIndex])),u=G([r,e],(([{bufTime:e},n])=>!t.paused&&(t.readyState<=HTMLMediaElement.HAVE_CURRENT_DATA||e-n<2&&t.readyState===HTMLMediaElement.HAVE_FUTURE_DATA))),h=G(c,((t,e)=>{if(!t||!t.lrc)return void e([]);const n=t.lrc;n.startsWith("http")?fetch(n).then((t=>{if(!t.ok)throw new Error(`${t.statusText} canot loading lrc from ${n}`);return t.text()})).then((t=>{e(Z(t))})).catch((t=>{throw e([]),console.error(t),t})):e(Z(n))}),[]);return{player:t,playList:o,currentSong:c,rdTime:l,currentTime:e,duration:n,rdBufTime:r,wtBufTime:s,loading:u,lrc:h,controlState:a,volumeState:i}}();i(t,M,(t=>l(4,d=t))),i(t,T,(t=>l(5,f=t))),i(t,I,(t=>l(19,w=t))),i(t,D,(t=>l(60,v=t))),i(t,A,(t=>l(61,m=t))),i(t,_,(t=>l(18,y=t))),i(t,k,(t=>l(62,g=t))),i(t,N,(t=>l(20,x=t))),i(t,L,(t=>l(6,p=t))),i(t,P,(t=>l(17,h=t))),i(t,V,(t=>l(21,$=t)));let{audio:z}=n,{order:O=h.order}=n,{loop:H=h.loop}=n,{volume:C=h.volume}=n,{mini:R=!1}=n,{mutex:U=!0}=n,{autoplay:j=!1}=n,{theme:Y="#fadfa3"}=n,{list_max_height:X=1/0}=n,W=!j;const F=()=>{U&&tt.forEach((t=>t.pause())),q.play().catch((t=>{console.error(t)}))};let Q=-1;q.addEventListener("timeupdate",(()=>{if(u(D,v=q.currentTime,v),a.includes("lrc")){for(;Q>0&&q.currentTime<p[Q][0];)l(7,Q--,Q);for(;Q+1<p.length&&q.currentTime>=p[Q+1][0];)l(7,Q++,Q)}})),q.addEventListener("volumechange",(()=>{u(P,h.volume=q.volume,h)})),q.addEventListener("loadedmetadata",(()=>{u(A,m=q.duration,m)})),q.addEventListener("error",(()=>{console.warn("An audio error has occurred, player will skip forward in 2 seconds."),d.audio.length>1&&setTimeout((()=>{u(M,d.playingIndex=(d.playingIndex+1)%d.audio.length,d),q.paused&&F()}),2e3)}));const et=()=>{const t=q.buffered.length?q.buffered.end(q.buffered.length-1):0;u(k,g=t,g)};q.addEventListener("progress",et),q.addEventListener("canplay",et),q.addEventListener("durationchange",(()=>{u(A,m=q.duration,m)}));let nt,lt,st,rt,ot,at,it,ct,ut;q.addEventListener("ended",(()=>{const t=Array.isArray(d.audio)?d.audio:[d.audio],e=(d.playingIndex+1)%t.length;if("none"===h.loop){if("list"===h.order)d.playingIndex<t.length-1?(u(M,d.playingIndex=e,d),l(1,q.currentTime=0,q)):(u(M,d.playingIndex=(d.playingIndex+1)%t.length,d),l(44,W=!0),q.pause());else if("random"===h.order){const n=Math.floor(t.length*Math.random());n===d.playingIndex?u(M,d.playingIndex=e,d):u(M,d.playingIndex=n,d),l(1,q.currentTime=0,q)}}else"one"===h.loop?l(1,q.currentTime=0,q):"all"===h.loop&&u(M,d.playingIndex=e,d)}));let ht,dt=0;S((()=>{"localhost"===location.hostname&&(window.theAudio=q);const t=function(t,e){let n=!1;return{volumeDragStart:()=>{n=!0},volumeDragMove:l=>{if(n){let n=1-((l.clientY||l.changedTouches[0].clientY)-e.getBoundingClientRect().top)/e.clientHeight;n=Math.max(n,0),n=Math.min(n,1),t.volume=n}},volumeDragEnd:l=>{if(n){let s=1-((l.clientY||l.changedTouches[0].clientY)-e.getBoundingClientRect().top)/e.clientHeight;s=Math.max(s,0),s=Math.min(s,1),t.volume=s,n=!1}}}}(q,nt);l(10,st=t.volumeDragStart),l(11,rt=t.volumeDragMove),l(12,ot=t.volumeDragEnd);const e=function(t,e){let n=!1;return{progressDragStart:()=>{n=!0},progressDragMove:l=>{if(n){let n=((l.clientX||l.changedTouches[0].clientX)-e.getBoundingClientRect().left)/e.clientWidth;n=Math.max(n,0),n=Math.min(n,1),t.currentTime=t.duration*n}},progressDragEnd:l=>{if(n){n=!1;let s=((l.clientX||l.changedTouches[0].clientX)-e.getBoundingClientRect().left)/e.clientWidth;s=Math.max(s,0),s=Math.min(s,1),t.currentTime=t.duration*s}}}}(q,lt);l(13,at=e.progressDragStart),l(14,it=e.progressDragMove),l(15,ct=e.progressDragEnd)}));return t.$$set=t=>{l(65,n=e(e({},n),c(t))),"audio"in t&&l(34,z=t.audio),"order"in t&&l(35,O=t.order),"loop"in t&&l(36,H=t.loop),"volume"in t&&l(37,C=t.volume),"mini"in t&&l(0,R=t.mini),"mutex"in t&&l(38,U=t.mutex),"autoplay"in t&&l(39,j=t.autoplay),"theme"in t&&l(40,Y=t.theme),"list_max_height"in t&&l(41,X=t.list_max_height)},t.$$.update=()=>{8&t.$$.dirty[1]&&l(45,s="string"==typeof z?JSON.parse(z):z),16384&t.$$.dirty[1]&&u(M,d.audio=Array.isArray(s)?s:[s],d),l(46,r=!function(t,e){const n=t[e];return!(null==n||"false"===n)}(n,"list_folded")&&d.audio.length>1),32768&t.$$.dirty[1]&&u(P,h.showList=r,h),32&t.$$.dirty[1]&&u(P,h.loop=H,h),16&t.$$.dirty[1]&&u(P,h.order=O,h),64&t.$$.dirty[1]&&u(P,h.volume=C,h),4&t.$$.dirty[0]|3072&t.$$.dirty[1]&&l(16,dt=Math.min(null!==l(42,E=null==ut?void 0:ut.scrollHeight)&&void 0!==E?E:0,X)),64&t.$$.dirty[1]&&l(1,q.volume=C,q),32&t.$$.dirty[0]&&l(1,q.src=f.url,q),32&t.$$.dirty[0]|4608&t.$$.dirty[1]&&l(47,o=null!==l(43,b=f.theme)&&void 0!==b?b:Y),8&t.$$.dirty[0]|65536&t.$$.dirty[1]&&ht&&ht.style.setProperty("--theme-color",o),64&t.$$.dirty[0]&&(a=p&&p.length>0?"withlrc":""),2&t.$$.dirty[0]|8192&t.$$.dirty[1]&&(q.src,l(7,Q=-1),W||F(),l(44,W=!1))},n=c(n),[R,q,ut,ht,d,f,p,Q,nt,lt,st,rt,ot,at,it,ct,dt,h,y,w,x,$,M,T,I,D,A,_,k,N,L,P,V,F,z,O,H,C,U,j,Y,X,E,b,W,s,r,o,()=>{q.paused?F():q.pause()},function(t){B[t?"unshift":"push"]((()=>{lt=t,l(9,lt)}))},()=>{l(1,q.muted=!q.muted,q)},function(t){B[t?"unshift":"push"]((()=>{nt=t,l(8,nt)}))},()=>{u(P,h.order="list"===h.order?"random":"list",h)},()=>{"all"===h.loop?u(P,h.loop="one",h):"one"===h.loop?u(P,h.loop="none",h):"none"===h.loop&&u(P,h.loop="all",h)},()=>{u(P,h.showList=!h.showList,h)},t=>{u(M,d.playingIndex=t,d),l(1,q.currentTime=0,q)},function(t){B[t?"unshift":"push"]((()=>{ut=t,l(2,ut)}))},function(t){B[t?"unshift":"push"]((()=>{ht=t,l(3,ht)}))}]}return class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),W(this,t,yt,gt,o,{audio:34,order:35,loop:36,volume:37,mini:0,mutex:38,autoplay:39,theme:40,list_max_height:41},[-1,-1,-1])}}}));
